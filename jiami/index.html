<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>加密工具（哈希版，无明文密码）</title>
    <style>
        body {font-family: "Microsoft Yahei", Arial; padding: 20px; max-width: 1000px; margin: 0 auto;}
        .box {margin: 15px 0;}
        textarea {width: 100%; height: 200px; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-family: Consolas;}
        button {padding: 10px 24px; background: #286090; color: white; border: none; border-radius: 4px; cursor: pointer;}
        .result {margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 6px; word-break: break-all; font-size: 12px;}
        .tips {color: #666; font-size: 12px; margin-top: 8px;}
    </style>
</head>
<body>
    <div class="box">
        <h3>1. 输入需要加密的文本</h3>
        <textarea id="original-text" placeholder="粘贴VB代码/任意文本..."></textarea>
    </div>

    <div class="box">
        <h3>2. 配置密码（默认：123456）</h3>
        <input type="password" id="pwd" value="123456" style="padding: 8px; width: 200px;">
        <button onclick="encryptAll()">生成密文+密码哈希</button>
        <div class="result" id="cipher-result">密文将显示在这里...</div>
        <div class="result" id="hash-result" style="margin-top: 5px;">密码哈希将显示在这里...</div>
        <p class="tips">提示：复制密文和哈希值，粘贴到博客代码中</p>
    </div>

<script src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.min.js"></script>
<script>
    // 通用加密配置
    const AES_KEY = CryptoJS.enc.Utf8.parse("1234567890123456");
    const AES_IV = CryptoJS.enc.Utf8.parse("abcdefghijklmnop");

    function encryptAll() {
        const originalText = document.getElementById("original-text").value.trim();
        const pwd = document.getElementById("pwd").value.trim();
        
        if (!originalText || !pwd) {
            alert("请输入文本和密码！");
            return;
        }

        // 1. 加密文本（生成密文）
        const utf8Data = CryptoJS.enc.Utf8.parse(originalText);
        const encrypted = CryptoJS.AES.encrypt(utf8Data, AES_KEY, {
            iv: AES_IV,
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7
        });
        const ciphertext = encrypted.toString();

        // 2. 生成密码的SHA256哈希（不可逆）
        const pwdHash = CryptoJS.SHA256(pwd).toString();

        // 显示并复制
        document.getElementById("cipher-result").textContent = "密文：" + ciphertext;
        document.getElementById("hash-result").textContent = "密码哈希：" + pwdHash;
        navigator.clipboard.writeText(`密文：${ciphertext}\n哈希：${pwdHash}`).then(() => {
            alert("生成成功！已复制到剪贴板");
        });
    }
</script>
</body>
</html>
